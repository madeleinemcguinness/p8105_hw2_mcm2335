p8105_hw2_mcm2335
================
Madeleine McGuinness
2023-10-03

## Set Up

``` r
#set working directory
setwd("~/Desktop/R_Building_Blocks_P8105/p8105_hw2_mcm2335")
```

## Import CSV Data Tables

``` r
pols_month = read_csv(file = "./data/pols-month.csv")
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment = read_csv(file = "./data/unemployment.csv")
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
snp = read_csv(file = "./data/snp.csv")
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

## Clean Data Table: Pols-month

``` r
names(pols_month) # names look clean
```

    ## [1] "mon"      "prez_gop" "gov_gop"  "sen_gop"  "rep_gop"  "prez_dem" "gov_dem" 
    ## [8] "sen_dem"  "rep_dem"

``` r
pols_month_2 <- pols_month |>
  separate(col = mon, into=c('year', 'month', 'day', sep='-')) #sep mon column
```

    ## Warning: Expected 4 pieces. Missing pieces filled with `NA` in 822 rows [1, 2, 3, 4, 5,
    ## 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, ...].

``` r
pols_month_2 <- pols_month_2 |>
  select(-'-') #remove '-' column

pols_month_2 <- pols_month_2 |>
  mutate(month = if_else(month == "01", "January", if_else(month == "02", "February", if_else(month == "03", "March", if_else(month == "04", "April", if_else(month == "05", "May", if_else(month == "06", "June", if_else(month == "07", "July", if_else(month == "08", "August", if_else(month == "09", "September", if_else(month == "10", "October", if_else(month == "11", "November", "December")))))))))))) #mutate month numbers to month names

pols_month_2 <- pols_month_2 |>
  mutate(president = if_else(prez_dem == 1, "dem", if_else(prez_gop == 1, "gop", NA_character_))) # new president value using prez_dem and prez_gop

pols_month_3 <- pols_month_2 |>
  select(-prez_dem, -prez_gop) # remove prez_dem and prez_gop variables

pols_month_final <- pols_month_3 |>
  select(-day) # remove day variable
```

## Clean Data Table: snp

``` r
names(snp) # names look clean
```

    ## [1] "date"  "close"

``` r
snp_2 <- snp |>
  separate(col = date, into=c('month', 'day', 'year', sep='/')) #sep date column
```

    ## Warning: Expected 4 pieces. Missing pieces filled with `NA` in 787 rows [1, 2, 3, 4, 5,
    ## 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, ...].

``` r
snp_2 <- snp_2 |>
  select(-'/') #remove '/' column

snp_2 <- snp_2 |>
  mutate(month = if_else(month == "1", "January", if_else(month == "2", "February", if_else(month == "3", "March", if_else(month == "4", "April", if_else(month == "5", "May", if_else(month == "6", "June", if_else(month == "7", "July", if_else(month == "8", "August", if_else(month == "9", "September", if_else(month == "10", "October", if_else(month == "11", "November", "December")))))))))))) #mutate month numbers to month names

snp_final <- snp_2 |>
  select(year, month, day, close) # arrange final snp dataset by year, month

snp_final <- snp_final |>
  transform(year = as.numeric(year)) # tranform year to numeric 

snp_final <- snp_final |>
  mutate(year = if_else(year < 16, year + 2000, year + 1900)) |>
  select(-day) |>
  transform(year = as.character(year))# mutate year to 4 digits instead of 2 digits for consistency with pols_month_final dataset and remove day, year back to character value
```

## Clean Data Table: unemployment

``` r
names(unemployment) #need to clean to make names all lowercase
```

    ##  [1] "Year" "Jan"  "Feb"  "Mar"  "Apr"  "May"  "Jun"  "Jul"  "Aug"  "Sep" 
    ## [11] "Oct"  "Nov"  "Dec"

``` r
unemployment_2 <- janitor::clean_names(unemployment) #cleaned names

unemployment_3 <- unemployment_2 |>
  pivot_longer(
    jan:dec, 
    names_to = "month",
    values_to = "unemployment") #pivoted from wide to long format

unemployment_final <- unemployment_3 |>
  mutate(month = if_else(month == "jan", "January", if_else(month == "feb", "February", if_else(month == "mar", "March", if_else(month == "apr", "April", if_else(month == "may", "May", if_else(month == "jun", "June", if_else(month == "jul", "July", if_else(month == "aug", "August", if_else(month == "sep", "September", if_else(month == "oct", "October", if_else(month == "nov", "November", "December")))))))))))) |>
  transform(year = as.character(year))#mutate month abbreviations to month names, transform year to character for consistency
```

## Merge Data Tables

``` r
combined_data =
  left_join(pols_month_final, snp_final)
```

    ## Joining with `by = join_by(year, month)`

``` r
combined_data_final =
  left_join(combined_data, unemployment_final)
```

    ## Joining with `by = join_by(year, month)`

## Answer
